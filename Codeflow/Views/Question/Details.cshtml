@model Codeflow.Models.Question

@{
    ViewBag.Title = "Details";
}

<h2>Details</h2>
@Html.ValidationMessage("CustomE")
<div>
    <h4>Question</h4>
	<hr />
    <dl class="dl-horizontal">
        @{ string Title = "View";}
        <dt>
            @Html.DisplayNameFor(model => Title)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.QuestionTittle)
        </dd>
        @{ string Description = "View";}
        <dt>
            @Html.DisplayNameFor(model => Description)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.QuestionString)
        </dd>
        @{ string User = "View";}
        <dt>
            @Html.DisplayNameFor(model =>User)
        </dt>

        <dd>
            @Html.ActionLink(Model.Account.FirstName, "Details","Account", new { id = Model.AccountID },null)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Votes)
        </dt>
        @{
            int votes = Model.Votetotals.Count;
            int votes2 = Model.Voteminus.Count;
            int votes3 = votes - votes2;
        }
        <dd>
            @Html.DisplayFor(model => votes3)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Answers)
        </dt>
        <a href='@Url.Action("Create", "UserQuestionVotes", new {id = Model.QuestionID})'>
            <input type="submit" value='Up Vote'/>
        </a>


        <a href='@Url.Action("Create", "UserQuestionMinus", new {id = Model.QuestionID})'>
            <input type="submit" value='Down Vote'/>
        </a>

        <a href='@Url.Action("Create", "Answer", new {id = Model.QuestionID}, null)'>
            <input type='button' value='Answer'/>
        </a>

        <dd>
            <table class="table">
                <tr>
                    <th>Answers</th>
                    <th>Votes</th>
                </tr>
                @foreach (var item in Model.Answers)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Answerstring)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Upvotes.Count)
                        </td>
                        <td>
                            @Html.ActionLink("Upvote", "Upvote", new {id = item.QuestionID}) |
                            @Html.ActionLink("Downvote", "Details", new {id = item.QuestionID}) |
                            @Html.ActionLink("Answer", "Create", new {id = item.QuestionID})|
                            @Html.ActionLink("Details", "Details", new {id = item.QuestionID})
                        </td>
                    </tr>

                }
            </table>
        </dd>

    </dl>
</div>
<p>
    @Html.ActionLink("Edit", "Edit", new { id = Model.QuestionID }) |
    @Html.ActionLink("Back to List", "Index")
</p>
